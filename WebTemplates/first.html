
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Side Navigation Bar</title>
<link rel="stylesheet"
	href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
	integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Roboto"
	rel="stylesheet">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
<link rel="stylesheet" href="SlideMenu.css">
<style>
* {
	box-sizing: border-box;
	padding: 0;
	margin: 0;
}

body {
	padding: 0;
	margin: 0;
}

#site-wrapper {
	position: relative;
}

.no-overflow {
	overflow: hidden;
	touch-action: none;
}

#site-canvas {
	height: 100%;
	position: relative;
	-webkit-transform: translateX(0);
	transform: translateX(0);
	-webkit-transform: translate3d(0, 0, 0);
	transform: translate3d(0, 0, 0);
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
	padding: 20px;
}

.show-nav #site-canvas {
	-webkit-transform: translateX(300px);
	transform: translateX(300px);
	transform: translate3d(300px, 0, 0);
	-webkit-transform: translate3d(300px, 0, 0);
}

#site-menu {
	width: 300px;
	height: 100%;
	position: absolute;
	top: 0;
	left: -300px;
	background: #428bca;
	padding: 15px;
}

.ease-in-out {
	-webkit-transition: 300ms ease-out all;
	transition: 300ms ease-out all;
}

/*Demo css, not important*/
* {
	font-family: 'Roboto', sans-serif;
}

body {
	height: 200%;
}

.m {
	font-size: 30px;
	text-decoration: none;
	color: #00b6ff;
	display: inline-block;
	padding-top: 10px;
	padding-bottom: 10px;
}

/* .m a:hover i {
    -webkit-transform: scale(1.5);
}

.m a:hover {} */
.m i, .m span {
	margin-right: 10px;
	display: inline-block;
	text-align: center;
	-webkit-transform: scale(1);
	transform: scale(1);
	-webkit-transition: all 400ms cubic-bezier(0.32, 1.25, 0.375, 1.15);
	transition: all 400ms cubic-bezier(0.32, 1.25, 0.375, 1.15);
}

body {
	/*box-shadow: inset 0 0 100px rgba(0, 0, 0, .5);*/
	background-color: #333;
	color: #fff;
}

.link {
	color: #00b6ff;
	text-decoration: none;
}

.link:hover {
	text-decoration: underline;
}
</style>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="SlideMenu.js"></script>
<script>
	var sm;
	$(document).ready(function() {
		sm = new SlideMenu(window.jQuery || window.$, {

			'closeMenuOnWidth' : 680,
			//'disableMenuOnWidth': 680,
			'debug' : true
		});
		// additional listeners
		$("#close-menu").on('click', function() {
			sm.closeMenu();
		});
		$(document).on('menuToggle', function() {
			console.log("menuToggle");
		});

		$(document).on('menuOpenEnded menuToggleEnded', function() {
			//setTimeout(function () { alert("opened"); }, 300);
			console.log("menu's animation ended after 300 ms");
		});
	});

	/* ------------------------------------------- */

	//TODO
	//change private and public functions correctly
	'use strict';

	function SlideMenu(options) {
		options = options || {};

		// Define variables
		this._B = options.container || document.querySelector('body');
		this._Wrapper = options.wrapper
				|| document.getElementById('site-wrapper');
		this._Canvas = options.canvas || document.getElementById('site-canvas');
		this._Button = options.button || document.getElementById('logo');
		this._percent = options.percent || 0.25; // percent to open
		this._area = options.area || 0.1; // 10% of left body is area where menu could be opened
		this._areaOpened = options.areaOpened || false; // if menu is opened, then area is full width, currently not working
		this._enabled = false;
		this._debug = options.debug || false;
		this._closeMenuOnWidth = options.closeMenuOnWidth || false;
		this._disableMenuOnWidth = options.disableMenuOnWidth || false; //disable touch listeners when window is higher then specific width
		this._size = options.size || 300;
		this._animationTime = options.animationTime || 300; // the time of ease-in-out animation for (*)Ended events
		this._direction = options.direction || 'left'; // 'left' or 'right';
		this._X;
		this._Y;
		this._W;

		this._createEvents();
		this._init();

	}

	/**
	 * Clear classes from canvas, enable touch and set start coordinates.
	 */
	SlideMenu.prototype.touch_start = function(e) {
		if (this._disableMenuOnWidth <= this._W
				&& this._disableMenuOnWidth !== false)
			return;
		if (e.touches[0].clientX >= this._W * this._area
				+ (this.isMenuOpened() ? this._size : 0) /*&& (!this.isMenuOpened() && !this._areaOpened)*/)
			return;

		$(this._Canvas).removeClass();
		this._enabled = true;
		$(document).trigger(this._eventTouchStart);
		if (!this._X)
			this._X = e.touches[0].clientX;
		if (!this._Y)
			this._Y = e.touches[0].clientX;
		this._log("Start (e)");
		this._log(e);
	}

	/**
	 * Visualizes touch move.
	 */
	SlideMenu.prototype.touch_move = function(e) {
		if (this.isMenuOpened())
			try {
				e.preventDefault();
			} catch (err) {
				this._log("e.preventDefault not supported");
			}
		if (this._enabled) {
			$(document).trigger(this._eventTouchMove);
			this._log("Touch enabled");
			this._log("0: " + this._X);
			this._log("1: " + (e.touches[0].clientX));
			this._log("Current: " + $(this._Canvas).data("x"));
			var m = (this._X - e.touches[0].clientX - $(this._Canvas).data("x"));
			this._log("m: " + m);
			if (-(m) <= this._size && m <= 0) {
				$(this._Canvas)
						.css("transform", "translateX(" + (-(m)) + "px)");

			}
			console.log(this._X - e.touches[0].clientX);
		} else {
			this._log("not enabled touch");
		}
	}

	/**
	 * Calculate the difference bettween starting coordinates and ending coordinates.
	 */
	SlideMenu.prototype.touch_end = function(e) {
		if (!this._enabled)
			return;
		$(document).trigger(this._eventTouchEnd);
		this._log("End (e)");
		this._log(e);
		this._log("3: " + "X: " + e.changedTouches[0].clientX);
		this._enabled = false;
		this._log("4: " + (this._X - e.changedTouches[0].clientX));
		var f = this._X - e.changedTouches[0].clientX;
		if (f == 0) { //same pos
			return;
		}
		var direction = Math.sign(f);
		$(this._Canvas).addClass('ease-in-out'); //smoth animations
		if (direction > 0) {
			//right +
			if (f >= this._W * this._percent) {
				this._log("Close menu")
				$(this._Canvas).css("transform", "translateX(" + 0 + "px)");
				$(this._Canvas).data("x", 0);
				this.closeMenu();
			} else {
				//not enough
				if (this.isMenuOpened()) {
					this._log("not_enough to close");
					$(this._Canvas).css("transform",
							"translateX(" + this._size + "px)");
					$(this._Canvas).data("x", this._size);
					$(document).trigger(this._eventNotEnough);
				}
			}
		} else {
			//left -
			if (-f >= this._W * this._percent) {
				this._log("Open Menu");
				$(this._Canvas).css("transform",
						"translateX(" + this._size + "px)");
				$(this._Canvas).data("x", this._size);
				this.openMenu();
			} else {
				//not enough
				$(this._Canvas).css("transform", "translateX(" + 0 + "px)");
				$(this._Canvas).data("x", 0);
				$(document).trigger(this._eventNotEnough);
			}
		}
		this._X = 0;
		this._Y = 0;
	}

	/**
	 * Opens menu.
	 */
	SlideMenu.prototype.openMenu = function() {
		$(this._Canvas).removeAttr("style");
		$(this._Canvas).removeClass();
		$(this._Canvas).addClass('ease-in-out');
		$(this._Wrapper).addClass('show-nav');
		$(this._Wrapper).addClass('no-overflow');
		$(document).trigger(this._eventOpen);
		let e = this._eventOpenEnded;
		setTimeout(function() {
			$(document).trigger(e);
		}, this._animationTime);
	}

	/**
	 * Closes menu.
	 */
	SlideMenu.prototype.closeMenu = function() {
		$(this._Canvas).removeAttr("style");
		$(this._Canvas).removeClass();
		$(this._Canvas).addClass('ease-in-out');
		$(this._Wrapper).removeClass('show-nav');
		$(this._Wrapper).removeClass('no-overflow');
		$(this._Canvas).data("x", 0);
		let e = this._eventCloseEnded;
		$(document).trigger(this._eventClose);
		setTimeout(function() {
			$(document).trigger(e);
		}, this._animationTime);
	}

	/**
	 * Toggles menu.
	 */
	SlideMenu.prototype.toggleMenu = function() {
		this._log("Clicked");
		$(this._Canvas).removeAttr("style");
		$(this._Canvas).removeClass();
		if (this.isMenuOpened()) {
			$(this._Canvas).data("x", 0);
		} else {
			$(this._Canvas).data("x", this._size);
		}
		$(this._Canvas).addClass('ease-in-out');
		$(this._Wrapper).toggleClass('show-nav');
		$(this._Wrapper).toggleClass('no-overflow');
		$(document).trigger(this._eventToggle);
		let e = this._eventToggleEnded;
		setTimeout(function() {
			$(document).trigger(e);
		}, this._animationTime);
	}

	/**
	 * Checks if menu is opened or not.
	 * @return boolean
	 */
	SlideMenu.prototype.isMenuOpened = function() {
		return $(this._Wrapper).hasClass('show-nav');
	}

	//In future add some details to each event, e.g. to touchMoved actual (m) etc.
	//it could trigger event by using this instead of document - $(this).trigger(this._event); and on client side it could be use by using reference instead document, e.g. - $(sm).on('event', function () {});
	/**
	 * Create all events.
	 */
	SlideMenu.prototype._createEvents = function() {
		this._eventOpen = jQuery.Event('menuOpen', []); // U
		this._eventClose = jQuery.Event('menuClose', []); // U
		this._eventOpenEnded = jQuery.Event('menuOpenEnded', []); // U
		this._eventCloseEnded = jQuery.Event('menuCloseEnded', []); // U
		this._eventNotEnough = jQuery.Event('menuNotEnough', []); // U - When the menu does not close or open after touch end
		this._eventToggle = jQuery.Event('menuToggle', []); // U
		this._eventToggleEnded = jQuery.Event('menuToggleEnded', []);
		this._eventTouchStart = jQuery.Event('touchStarted', []); // U
		this._eventTouchMove = jQuery.Event('touchMoved', []); // U
		this._eventTouchEnd = jQuery.Event('touchEnded', []); // U
	}

	/**
	 * Initializes EventListeners.
	 */
	SlideMenu.prototype._init = function() {
		var x = this;
		console.log(x);
		//this._B.addEventListener('touchstart',this._touch_start, false);
		this._B.addEventListener('touchstart', bind(this, this.touch_start),
				false);
		this._B.addEventListener('touchmove', bind(this, this.touch_move),
				false);
		this._B.addEventListener('touchend', bind(this, this.touch_end), false);
		addEventListener('resize', bind(this, this._resize), false);
		this._resize(); //init _W
		$(this._Canvas).data("x", 0);
		this._Button.addEventListener('click', bind(this, this.toggleMenu),
				false);
	}

	/**
	 * Updates variable _W with actual width of the window.
	 */
	SlideMenu.prototype._resize = function() {
		//fix bug when window width was bigger then should be
		$('meta[name=viewport]').remove();
		$('head')
				.append(
						'<meta name="viewport" content="width=' + window.innerWidth + ', initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />');
		this._W = window.innerWidth;
		if (this._closeMenuOnWidth !== false) {
			if ($(window).width() > this._closeMenuOnWidth) {
				this.closeMenu();
			}
		}
	}

	/**
	 * If debug is enabled, it calls console.log() with the text passed from the argument.
	 * @param {string} t Text
	 */
	SlideMenu.prototype._log = function(t) {
		if (this._debug) {
			console.log(t);
		}
	}

	/**
	 * Sets scope to variable.
	 * @param {object} scope 
	 * @param {function} fn 
	 */
	function bind(scope, fn) {
		return function() {
			return fn.apply(scope, arguments);
		}
	}
</script>
</head>
<body class="fluid-container" id="site-wrapper" style="background-color: #DDEDE8">
<div class="header" style="background-color: #2C3539;padding: 10px 10px 10px 40px;">
  	<h1 style="font-weight: 900;">Header</h1>
</div>
	<div id="site-canvas">
		<div id="site-menu"
			style="background-color: #B69F5E; height: 40rem; font-size: 1.5rem; padding-left: 30px">
			<h1 style="color: purple; font-weight: 900;">Menu</h1>
			<ul style="align-items: center; list-style-type: none">
				<button style="height: 3rem; width: 15rem; margin-bottom: 3px">
					<li><a href="#"
						style="color: black; padding: 10px 10px 10px 10px">Home</a></li>
				</button>
				<br>
				<button style="height: 3rem; width: 15rem; margin-bottom: 3px">
					<li><a href="#"
						style="color: black; padding: 10px 10px 10px 10px">Profile</a></li>
				</button>
				<br>
				<button style="height: 3rem; width: 15rem; margin-bottom: 3px">
					<li><a href="#"
						style="color: black; padding: 10px 10px 10px 10px">About</a></li>
				</button>
				<br>
				<button style="height: 3rem; width: 15rem; margin-bottom: 3px">
					<li><a href="#"
						style="color: black; padding: 10px 10px 10px 10px">Blogs</a></li>
				</button>
				<br>

			</ul>
		</div>
		<div class="row"
			style="background-color: #bac4c8; position: fixed; width: 100%; font-weight: 900">
			<div class="col-2">
				<a href="#" class="logo m" id="logo"><i class="fa fa-bars"></i>
					<span style="color: #2C2F32">Menu</span> </a>
			</div>
			<div class="col-10"
				style="background-color: #BCB8C9; font-size: 2rem; font-family: monospace;">
				<a href="#" class="logo m" id="logo"> <span
					style="color: #2C2F32">Home</span>
				</a> <a href="#" class="logo m" id="logo"> <span
					style="color: #2C2F32">About</span>
				</a>
			</div>
		</div><br><br><br><br>
		<div class="row" style="color: black;">
			<p>Caviar The term caviar, also called roe, is one used to refer
				to a variety of colors, including shades of orange, red, brown,
				black, and gray. Which shade the term refers depends on which
				species of fish the caviar comes from. For example, white trout
				caviar is orange, while the caviar from Osetra is grayish brown.
				However, beluga caviar, which comes from the sturgeon, is
				grayish-silver with hints of black. If you find the color caviar
				that is golden yellow, the manufacturer took its cues from the
				whitefish. Red or orange derives either from the salmon or carp. How
				and where you use caviar and with which other colors really depends
				on which fish a manufacturer was inspired by. For instance, if you
				find caviar of the golden yellow variety, pair it with other colors
				found in nature such as blues, greens, reds, browns, and purples.
				Doing so will give your space an airy and inviting feel. If,
				however, the color was inspired by the graying-silver roe of the
				sturgeon, you can use other shades of gray, black, and white to
				achieve a space that is visually dramatic. You can also incorporate
				emerald green and navy blue elements for the same effect. The color
				caviar varies depending on who you're talking to. Know which shade
				you're getting before planning the rest of your décor.</p>
				
		</div>
	</div>

</body>
</html>




















